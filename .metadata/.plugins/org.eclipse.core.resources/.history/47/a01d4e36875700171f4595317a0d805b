package me.ryehjael;


import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.BlockBreakEvent;
import org.bukkit.event.entity.EntityDamageEvent;
import org.bukkit.event.entity.EntityInteractEvent;
import org.bukkit.event.inventory.InventoryClickEvent;
import org.bukkit.event.inventory.InventoryCloseEvent;
import org.bukkit.event.inventory.PrepareItemCraftEvent;
import org.bukkit.event.player.PlayerInteractEntityEvent;
import org.bukkit.event.player.PlayerItemHeldEvent;
import org.bukkit.event.player.PlayerJoinEvent;

import net.md_5.bungee.api.ChatColor;


public class PlayerListener
  implements Listener
{
  @EventHandler
  public void prepareRecipe(PrepareItemCraftEvent e)
  {
    Recipes recipes = new Recipes();
    recipes.findRecipe(e);
  }
  
  public PlayerListener(Main plugin)
  {
    plugin.getServer().getPluginManager().registerEvents(this, plugin);
  }
  
  @EventHandler
  public void playerJoin(PlayerJoinEvent e)
  {
    ServerScoreboard ssb = new ServerScoreboard();
    ssb.ScoreboardConfigure();
  }
  
  @EventHandler
  public void onBlockBreak(BlockBreakEvent event)
  {
    BlockBreakHandler blockHandler = new BlockBreakHandler();
    blockHandler.blockBreakHandler(event);
  }
  
  @EventHandler
  public void onDamage(EntityDamageEvent e) {}
  
  @EventHandler
  public void closeInventory(InventoryCloseEvent e)
  {
    ItemCheck ic = new ItemCheck();
    Player p = (Player)e.getPlayer();
    ic.updatePlayerStats(p);
  }
  
  @EventHandler
  public void entityInteract(PlayerInteractEntityEvent e) {
	  Player entity = (Player) e.getRightClicked();
	  if (entity.getDisplayName().toString() == "Arthas") {
		  entity.chat(ChatColor.AQUA + "hello");  
	  }
  }
  
  @EventHandler
  public void changeItem(PlayerItemHeldEvent e)
  {
    ItemCheck ic = new ItemCheck();
    int newSlot = e.getNewSlot();
    Player p = e.getPlayer();
    ic.updatePlayerStats(p, newSlot);
  }
  
  @EventHandler
  public void onInventoryClick(InventoryClickEvent event)
  {
    Inventories inv = new Inventories();
    inv.onInventoryClick(event);
  }
}
